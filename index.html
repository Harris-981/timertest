let timeLeft;
        let timerId = null;

        const display = document.getElementById('display');
        const timeOverlay = document.getElementById('timeOverlay');
        const usagi = document.getElementById('usagi');
        const unaSound = document.getElementById('unaSound');
        const yahaSound = document.getElementById('yahaSound');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const minInput = document.getElementById('minutes');
        const secInput = document.getElementById('secondsInput');

        function tick() {
            if (timerId === null) {
                const now = new Date();
                const h = String(now.getHours()).padStart(2, '0');
                const m = String(now.getMinutes()).padStart(2, '0');
                const s = String(now.getSeconds()).padStart(2, '0');
                timeOverlay.innerText = `ÁèæÂú®ÊôÇÈñì ${h}:${m}:${s}`;
                timeOverlay.style.color = "#ff6f00";
            }
        }
        setInterval(tick, 1000);
        tick();

        function updateDisplay(totalSeconds) {
            const m = String(Math.floor(totalSeconds / 60)).padStart(2, '0');
            const s = String(totalSeconds % 60).padStart(2, '0');
            display.innerText = `${m}:${s}`;
        }

        function startTimer() {
            if (timerId !== null) return;

            const mVal = parseInt(minInput.value) || 0;
            const sVal = parseInt(secInput.value) || 0;
            timeLeft = (mVal * 60) + sVal;

            if (timeLeft <= 0) return;

            startBtn.disabled = true;
            minInput.disabled = true;
            secInput.disabled = true;
            usagi.classList.add('bouncing');

            timerId = setInterval(() => {
                timeLeft--;
                updateDisplay(timeLeft);
                timeOverlay.innerText = `Ââ©È§òÂÄíÊï∏Ôºö${timeLeft}Áßí`;
                timeOverlay.style.color = "#d32f2f";

                if (timeLeft > 0) {
                    // ÂÄíÊï∏‰∏≠Êí≠Êîæ Una
                    if (unaSound.paused || unaSound.ended) {
                        unaSound.play().catch(e => {});
                    }
                } else {
                    // ÂâõÂ•ΩÂà∞ 0 ÁßíÔºöÁ´ãÂàªÂÅúÊ≠¢Ë®àÊôÇ‰∏¶Êí≠Êîæ Yaha
                    stopTimer();
                    
                    // Êí≠Êîæ Yaha ËÅ≤
                    yahaSound.currentTime = 0;
                    yahaSound.play().catch(e => {});

                    // Âª∂ÈÅ≤‰∏ÄÈªûÈªûÂÜçË∑≥ÂΩàÁ™óÔºåÊâç‰∏çÊúÉÊìã‰ΩèËÅ≤Èü≥Êí≠Êîæ
                    setTimeout(() => {
                        alert("Yaha! ÊôÇÈñìÂà∞Âï¶ÔºÅüê∞‚ú®");
                    }, 100);
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerId);
            timerId = null;
            startBtn.disabled = false;
            minInput.disabled = false;
            secInput.disabled = false;
            usagi.classList.remove('bouncing');
            tick();
        }

        function handleReset() {
            stopTimer();
            const mVal = parseInt(minInput.value) || 0;
            const sVal = parseInt(secInput.value) || 0;
            updateDisplay((mVal * 60) + sVal);
        }

        startBtn.addEventListener('click', startTimer);
        resetBtn.addEventListener('click', handleReset);

        [minInput, secInput].forEach(input => {
            input.addEventListener('input', () => {
                if (timerId === null) {
                    const m = parseInt(minInput.value) || 0;
                    const s = parseInt(secInput.value) || 0;
                    updateDisplay((m * 60) + s);
                }
            });
        });
